{{ define "main" }}

<!-- Full-page background video (behind all content) -->
<video class="site-bg-video" autoplay loop muted playsinline poster="./images/fond-1.jpg" style="position:fixed; inset:0; width:100%; height:100%; object-fit:cover; z-index:-1; pointer-events:none;">
    <source src="https://media.gettyimages.com/id/1974067879/fr/vid%C3%A9o/voler-vers-le-coucher-du-soleil-p%C3%A9ninsule-de-nicoya-costa-rica-partie-2.mp4?s=mp4-640x640-gi&k=20&c=TXx7NeUbDhHIas-S2WeKPuypomeMRcPt_rK48FJrc44=" type="video/mp4">
</video>

<!-- Section Header -->
{{ with .Site.GetPage "01-header" }}
{{ .Content | safeHTML }}
{{ end }}

<!-- Section Accueil -->
<section id="accueil" class="section">
    <!-- Parallax background for accueil (moved above site-wide video) -->
    <div class="parallax-bg" style="background-image: url('./images/fond-1.jpg'); top:0;"></div>
    <div class="container dark-box">
        {{ with .Site.GetPage "02-accueil" }}
        {{ .Content | safeHTML }}
        {{ end }}
    </div>
    <a href="#presentation" class="cta-button" data-section="presentation">Présentation</a>
</section>

<!-- Section Présentation -->
<section id="presentation" class="section">

<!--
    <div class="parallax-bg" style="background-image: url('./images/fond-2.webp'); top:-1000px"></div>
-->

    <div class="container dark-box">
        {{ with .Site.GetPage "03-presentation" }}
        <h2 class="section-title">{{ .Title }}</h2>
        <div class="section-content">
            {{ .Content | safeHTML }}
        </div>
        {{ end }}
    </div>
</section>

<!-- Section Thérapies & Massages -->
<section id="therapies-massages" class="section">
    <div class="container">
        <h2 class="section-title">Thérapies & Massages</h2>
        <div class="section-content">
            <div class="services-grid">
                <div class="section-content">
                    <div class="services-grid">
                        {{- /* Render therapy pages whose filename begins with "04-" (files now identified by filename prefix) */ -}}
                        {{- $items := slice -}}
                        {{- range .Site.RegularPages -}}
                            {{- if strings.HasPrefix .File.LogicalName "04-" -}}
                                {{- $items = $items | append . -}}
                            {{- end -}}
                        {{- end -}}
                        {{- $therapies := sort $items "File.LogicalName" "asc" -}}
                        {{- range $therapies -}}
                        <div class="service-card" id="{{ .File.BaseFileName }}">
                            {{ .Content | safeHTML }}
                        </div>
                        {{- end -}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section Contact -->
<section id="contact-infos" class="section">
    <div class="container">
        <h2 class="section-title">Contact & Infos</h2>
        <div class="section-content">
            <div class="contact-items">
                {{ with .Site.GetPage "05-contact" }}
                {{ .Content | safeHTML }}
                {{ end }}
            </div>
        </div>
    </div>
</section>

<!-- Section Footer -->
<footer id="footer">
    {{ with .Site.GetPage "06-footer" }}
    {{ .Content | safeHTML }}
    {{ end }}
</footer>

{{ end }}